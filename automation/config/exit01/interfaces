
# Loopback interface
auto lo
iface lo inet loopback
  address 10.0.0.41/32
  alias loopback interface

# Management interface
auto eth0
iface eth0
  vrf mgmt
  address 10.0.3.41/25
  gateway 10.0.3.1

auto mgmt
iface mgmt
    address 127.0.0.1/8
    vrf-table auto


# Connects to border router
auto swp32
iface swp32
  alias to border router
  

iface swp32
  vrf Customer_A
    address 185.2.139.136/31
      address 2A02:2498:E004:1F::2/64


# Connects to spine02
auto swp2
iface swp2
  alias to spine02
  



# Connects to spine01
auto swp1
iface swp1
  alias to spine01
  



# Connects to spine04
auto swp4
iface swp4
  alias to spine04
  



# Connects to spine03
auto swp3
iface swp3
  alias to spine03
  







# Bridge configuration
auto bridge
iface bridge
    bridge-vlan-aware yes
    bridge-ports  vxlan200 vxlan300
    bridge-vids 200 300
    bridge-pvid 1


# VNI configuration
auto vxlan300
iface vxlan300
    mtu 9166
    vxlan-id 10300
    vxlan-local-tunnelip 10.0.0.41
    bridge-access 300
    bridge-learning off
    mstpctl-bpduguard yes
    mstpctl-portbpdufilter yes
    bridge-arp-nd-suppress on

# VNI configuration
auto vxlan200
iface vxlan200
    mtu 9166
    vxlan-id 10200
    vxlan-local-tunnelip 10.0.0.41
    bridge-access 200
    bridge-learning off
    mstpctl-bpduguard yes
    mstpctl-portbpdufilter yes
    bridge-arp-nd-suppress on

auto Customer_A
iface Customer_A
    vrf-table auto

auto Customer_B
iface Customer_B
    vrf-table auto



auto vlan200
iface vlan200
    vlan-id 200
    vlan-raw-device bridge
    vrf Customer_A

auto vlan300
iface vlan300
    vlan-id 300
    vlan-raw-device bridge
    vrf Customer_B

