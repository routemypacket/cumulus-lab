
auto lo
iface lo inet loopback
    address 10.0.160.11/32
    alias to_loopback interface

# Management interface

auto eth0
iface eth0 inet dhcp
    vrf mgmt

auto mgmt
iface mgmt
    address 127.0.0.1/8
    vrf-table auto

auto swp1
iface swp1
    alias to_server01
    bridge-access 100

auto swp2
iface swp2
    alias to_server02
    bridge-access 100

auto swp49
iface swp50
    alias to_spine01

auto swp50
iface swp50
    alias to_spine02

# Define the bridge for STP
auto bridge
iface bridge
    bridge-vlan-aware yes
    # bridge-ports includes all ports related to VxLAN and CLAG.
    # does not include the Peerlink.4094 subinterface
    bridge-ports swp1 swp2 vni100 vxlan4001
    bridge-vids 100 4001
    bridge-pvid 1

# VxLAN Tunnel for Pubic Network (Vlan 100)
auto vni100
iface vni100
    mtu 9166
    vxlan-id 10100
    vxlan-local-tunnelip 10.0.160.11
    bridge-access 100
    bridge-learning off
    mstpctl-bpduguard yes
    mstpctl-portbpdufilter yes

auto vxlan4001
iface vxlan4001
    hwaddress 44:39:39:FF:40:94
    vxlan-id 104001
    vxlan-local-tunnelip 10.0.160.11
    bridge-learning off
    bridge-access 4001

auto public
iface public
    vrf-table auto


auto vlan100
iface vlan100
    address 185.2.136.241/28
    address 2A02:2498:E004:4F::1/64
    vlan-id 100
    vlan-raw-device bridge
    vrf public


auto vlan4001
iface vlan4001
    vlan-id 4001
    vlan-raw-device bridge
    vrf public
